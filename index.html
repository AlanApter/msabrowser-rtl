<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title>MSAViewer Demo</title>
	<link type="text/css" rel="stylesheet" href="tool.css" media="screen"/>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script>
	<script src="MSAViewer.js"></script>
</head>
<body>
	
	 <!-- MSAViewer Demo -->
	<section id="MSAViewerDemo"></section>
	<!-- end of MSAViewer Demo -->


    <script type="text/javascript" charset="utf-8">
		var id = 'MSAViewerDemo';
		var file_name = "sample_files/hars.txt";
		var title = 'Human: HARS';
		var colorSchema = "clustal";
    	
    	var domains = [
						{
							'domain_id': "PFAM123",
							'domain_name': "Protein Kinase Domain",
							'domain_external_link': "http://google.com/",
							'domain_start_point': 11,
							'domain_end_point': 32
						},
						{
							'domain_id': "ANANZA",
							'domain_name': "Protein Kinase Domain",
							'domain_external_link': "http://google.com/",
							'domain_start_point': 35,
							'domain_end_point': 55
						}
					];

		function loadAlignmentFile() {
		var xhr = new XMLHttpRequest();
		xhr.open("GET", file_name, true);
		xhr.onload = function() {if (this.status == 200) {
			fasta = this.responseText;
			
			var viewer = new MSAViewer({
				id: id, 
				msa: MSAProcessor({
					fasta: fasta,
					hasConsensus: true,
					colorSchema: colorSchema
				}), 
				title: title, 
				domains: domains
			});
			
			viewer.addVariation(1, 1, "M->A : Pathogenic", "Source1");
			viewer.addVariation(1, 1, "M->G : VUS", "Source2");
			viewer.addVariation(2, 2, "A->R : Benign", "Source3");
			viewer.addVariation(3, 4, "T->L : Benign", "Source4");
			viewer.addVariation(3, 4, "T->L : Benign", "PTM");
			viewer.export("MSA_export.fasta");
			viewer.loadDivsInViewport(true);

		}} 
		xhr.send();
		}
		loadAlignmentFile();

    </script>
</body>
</html>